<link
  href="https://fonts.googleapis.com/css2?family=Material+Icons"
  rel="stylesheet"
/>
<div class="example-form">
  <div>
  <mat-label class="header">üìú –ù–æ–≤—ã–π —Ç–µ—Å—Ç-–∫–µ–π—Å</mat-label>
  <button
    mat-button
    color="primary"
    class="save-button"
    (click)="save()"
    [disabled]="!myForm.valid"
  >
    <mat-icon>save</mat-icon>
    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
  </button>
</div>

  <mat-form-field [formGroup]="myForm" class="example-full-width">
    <mat-label>–ù–∞–∑–≤–∞–Ω–∏–µ</mat-label>
    <textarea
      matInput
      placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç –∫–µ–π—Å–∞"
      (input)="inputNameHandler($event)"
      spellcheck="true"
      cdkTextareaAutosize
      cdkAutosizeMinRows="1"
      cdkAutosizeMaxRows="8"
      maxlength="100"
      minlength="1"
      maxRows="5"
      (input)="limitLines($event, 5)"
      formControlName="name_field"
      required
    ></textarea>
    <button
      *ngIf="name"
      matSuffix
      mat-icon-button
      aria-label="Clear"
      (click)="name = ''"
    >
      <mat-icon>close</mat-icon>
    </button>
    <mat-hint align="end">{{ name.length }} / 100</mat-hint>
    <div *ngIf="myForm.invalid && (myForm.dirty || myForm.touched)">
      <div align="start" *ngIf="myForm.errors?.['isInvalid']">
        <div class="error_label">–ò–º—è –¥–æ–ª–∂–Ω–æ —Å–æ—Å—Ç–æ—è—Ç—å –∏–∑ –±—É–∫–≤ –∏ —Ü–∏—Ñ—Ä</div>
      </div>

      <div align="start" *ngIf="myForm.errors?.['isEmpty']">
        <div class="error_label">–ò–º—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º</div>
      </div>
    </div>
  </mat-form-field>
  <div>
  <mat-icon>record_voice_over</mat-icon>
  <mat-label class="header"> –í–ª–∏—è–Ω–∏–µ:</mat-label>
  <mat-form-field class="product-select">
    <mat-label>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–¥—É–∫—Ç</mat-label>
    <mat-select [(value)]="product">
      <mat-option *ngFor="let it of products" [value]="it">
        {{ it }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field class="component-select">
    <mat-label>–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç</mat-label>
    <mat-select [(value)]="component">
      <mat-option *ngFor="let it of components" [value]="it">
        {{ it }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field class="priority-select">
    <mat-label>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</mat-label>
    <mat-select [(value)]="priority">
      <mat-option *ngFor="let it of priorities" [value]="it">
        {{ it }}
      </mat-option>
    </mat-select>
  </mat-form-field>
</div>
  <mat-form-field class="example-full-width">
    <mat-label>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–¥–∞—á—É</mat-label>
    <input matInput placeholder="https —Å—Å—ã–ª–∫–∞" [(ngModel)]="task" />
  </mat-form-field>
  <header class="page-header">
    <button class="display-child-element" (click)="togglePrepare()" mat-icon-button aria-label="–°–≤–µ—Ä–Ω—É—Ç—å">
      <mat-icon>{{ _togglePrepare == true ? 'keyboard_arrow_up' : 'keyboard_arrow_down' }}</mat-icon>
    </button>
    <h2 class="display-child-element" >–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:</h2>

    <button class="display-child-element" (click)="toogleNewPrepare()" mat-icon-button aria-label="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
      <mat-icon>create icon</mat-icon>
    </button>
  </header>

  <div *ngIf="_togglePrepare">
    <div class="none-header" *ngIf="prepare_steps.length == 0 && _toggleNewPrepare == false">
      <p>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –Ω–µ—Ç</p>
    </div>
    <app-step-view (deleteEvent)='onDeletEvent($event)' *ngFor="
      let iterCard of prepare_steps;
      let idx = index"

      [step]="iterCard"
      [index]="idx + 1"
    ></app-step-view>
    <div *ngIf="_toggleNewPrepare">
    <app-step (someEvent)='getNotification($event)' [step_index]="prepare_steps.length + 1"/>
    </div>
  </div>
  <header class="page-header">
    <button class="display-child-element" (click)="toggleSteps()" mat-icon-button aria-label="–°–≤–µ—Ä–Ω—É—Ç—å">
      <mat-icon>{{ _toggleSteps == true ? 'keyboard_arrow_up' : 'keyboard_arrow_down' }}</mat-icon>
    </button>
    <h2 class="display-child-element">–®–∞–≥–∏:</h2>


    <button class="display-child-element" (click)="toogleNewStep()" mat-icon-button aria-label="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
      <mat-icon>create icon</mat-icon>
    </button>

  </header>
  <div *ngIf="_toggleSteps">
  <div class="none-header" *ngIf="steps.length == 0 && _toggleNewSteps == false">
    <p>–®–∞–≥–æ–≤ –Ω–µ—Ç</p>
  </div>
  <app-step-view (deleteEvent)='onDeletStepEvent($event)' *ngFor="
    let iterCard of steps;
    let idx = index"

    [step]="iterCard"
    [index]="idx + 1"
    ></app-step-view>
    <div *ngIf="_toggleNewSteps">
      <app-step (someEvent)='onCreateStep($event)' [step_index]="steps.length + 1"/>
    </div>
  </div>
  <header class="page-header">
    <button class="display-child-element" (click)="toggleEditExpect()" mat-icon-button aria-label="–°–≤–µ—Ä–Ω—É—Ç—å">
      <mat-icon>{{ _toggleEditExpect == true ? 'keyboard_arrow_up' : 'keyboard_arrow_down' }}</mat-icon>
    </button>
    <h2 class="display-child-element">–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</h2>

    <button class="display-child-element" (click)="toogleNewExpect()" mat-icon-button aria-label="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
      <mat-icon>create icon</mat-icon>
    </button>
  </header>

    <div *ngIf="final_expected.length == 0 && _toggleEditExpect && _toggleEditNewExpect == false;">
      <p class="final-expected-text"> –û–∂–∏–¥–∞–µ–º–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–µ—Ç</p>
    </div>

    <div *ngIf="_toggleEditNewExpect == false && final_expected.length != 0 && _toggleEditExpect == true">
      <quill-view-html
        class="step-expected"
        [content]="final_expected"
        theme="snow"
      ></quill-view-html>
    </div>

  <div *ngIf="_toggleEditNewExpect == true && _toggleEditExpect">
  <div [formGroup]="form">
    <quill-editor class="editor-container"
    [(ngModel)]="editorContent"
    placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç"
    formControlName="text"

    (onBlur)="blur()"
    (onSelectionChanged)="onSelectionChanged()"
    (onContentChanged)="onContentChanged($event)"
    (onEditorChanged)="changedEditor($event)"
    >
    </quill-editor>
      <button
    mat-button
    color="primary"
    class="save-button"
    (click)="cancelExpected()"
  >
    <mat-icon>cancel</mat-icon>
    –û—Ç–º–µ–Ω–∞
  </button>
  </div>
    <button
    mat-button
    color="primary"
    class="save-button"
    (click)="saveExpected()"
  >
    <mat-icon>done</mat-icon>
    –î–æ–±–∞–≤–∏—Ç—å
  </button>

  </div>  
</div>
